<h1>✏️ Edit Product</h1>

<div style="background: white; border-radius: 8px; padding: 2rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); max-width: 800px;">
  <%= form_with model: [:admin, @product], local: true do |f| %>
    <% if @product.errors.any? %>
      <div style="background: #f8d7da; color: #721c24; padding: 1rem; margin-bottom: 1rem; border-radius: 4px;">
        <h3>Please fix these errors:</h3>
        <ul>
          <% @product.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div style="margin-bottom: 1rem;">
      <%= f.label :title, "Title *", style: "display: block; margin-bottom: 0.5rem; font-weight: bold;" %>
      <%= f.text_field :title, required: true, style: "width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;" %>
    </div>

    <div style="margin-bottom: 1rem;">
      <%= f.label :isbn, "ISBN", style: "display: block; margin-bottom: 0.5rem; font-weight: bold;" %>
      <%= f.text_field :isbn, style: "width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;" %>
    </div>

    <div style="margin-bottom: 1rem;">
      <%= f.label :description, "Description *", style: "display: block; margin-bottom: 0.5rem; font-weight: bold;" %>
      <%= f.text_area :description, required: true, rows: 5, style: "width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;" %>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
      <div>
        <%= f.label :current_price, "Price ($) *", style: "display: block; margin-bottom: 0.5rem; font-weight: bold;" %>
        <%= f.number_field :current_price, step: 0.01, required: true, style: "width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;" %>
      </div>

      <div>
        <%= f.label :stock_quantity, "Stock Quantity *", style: "display: block; margin-bottom: 0.5rem; font-weight: bold;" %>
        <%= f.number_field :stock_quantity, required: true, style: "width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;" %>
      </div>
    </div>

    <div style="margin-bottom: 1rem;">
      <%= f.label :category_id, "Category *", style: "display: block; margin-bottom: 0.5rem; font-weight: bold;" %>
      <%= f.select :category_id, options_from_collection_for_select(@categories, :id, :category_name, @product.category_id), { prompt: "Select a category" }, { required: true, style: "width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;" } %>
    </div>

    <div style="margin-bottom: 1rem;">
      <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Authors</label>
      <%= select_tag "product[author_ids][]", options_from_collection_for_select(@authors, :id, :author_name, @product.author_ids), { multiple: true, style: "width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; height: 150px;" } %>
      <small style="color: #666;">Hold Ctrl (Cmd on Mac) to select multiple authors</small>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
      <div>
        <%= f.label :publisher, "Publisher", style: "display: block; margin-bottom: 0.5rem; font-weight: bold;" %>
        <%= f.text_field :publisher, style: "width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;" %>
      </div>

      <div>
        <%= f.label :publication_date, "Publication Date", style: "display: block; margin-bottom: 0.5rem; font-weight: bold;" %>
        <%= f.date_field :publication_date, style: "width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;" %>
      </div>

      <div>
        <%= f.label :pages, "Pages", style: "display: block; margin-bottom: 0.5rem; font-weight: bold;" %>
        <%= f.number_field :pages, style: "width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;" %>
      </div>
    </div>

    <div style="margin-bottom: 1.5rem;">
      <%= f.label :language, "Language", style: "display: block; margin-bottom: 0.5rem; font-weight: bold;" %>
      <%= f.text_field :language, style: "width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;" %>
    </div>

    <div style="display: flex; gap: 1rem;">
      <%= f.submit "Update Product", style: "background: #5b7c99; color: white; padding: 0.75rem 2rem; border: none; border-radius: 4px; cursor: pointer; font-size: 1rem;" %>
      <%= link_to "Cancel", admin_products_path, style: "background: #6c757d; color: white; padding: 0.75rem 2rem; border-radius: 4px; text-decoration: none; display: inline-block;" %>
    </div>
  <% end %>
</div>